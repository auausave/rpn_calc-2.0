<!DOCTYPE html>
<html lang="en-us">
<head>
  <title>rpn_manual.nim</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2280%22>ğŸ³</text></svg>">
  <meta content="text/html; charset=utf-8" http-equiv="content-type">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="nimib 0.3.12" name="generator">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/light.min.css">
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/gh/pietroppeter/nimib/assets/atom-one-light.css'>
    <script src="https://cdn.jsdelivr.net/gh/pietroppeter/nimib@main/assets/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

  <style>
.nb-box {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.nb-small {
  font-size: 0.8rem;
}
button.nb-small {
  float: right;
  padding: 2px;
  padding-right: 5px;
  padding-left: 5px;
}
section#source {
  display:none
}
pre > code {
  font-size: 1.2em;
}
.nb-output {
  line-height: 1.15;
}
figure {
  margin: 2rem 0;
}
figcaption {
  text-align: center;
}
  
</style>
  
</head>
<body>
<header>
<div class="nb-box">
  <span><a href=".">ğŸ¡</a></span>
  <span><code>rpn_manual.nim</code></span>
  <span></span>
</div>
<hr>
</header><main>
<h1>RPN è®¡ç®—å™¨æ‰‹å†Œ</h1>
<p>RPNï¼ˆé€†æ³¢å…°è¡¨ç¤ºæ³•ï¼‰æ˜¯ä¸€ç§æ•°å­¦è¡¨è¾¾å¼è¡¨ç¤ºæ³•ï¼Œå…¶ä¸­è¿ç®—ç¬¦ä½äºæ“ä½œæ•°ä¹‹åã€‚</p>
<h2>åŸºæœ¬æ“ä½œ</h2>
<p>RPN è®¡ç®—å™¨ä½¿ç”¨æ ˆæ¥å­˜å‚¨æ“ä½œæ•°ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›åŸºæœ¬æ“ä½œç¤ºä¾‹ï¼š</p>
<pre><code class="nohighlight hljs nim"><span class="hljs-comment"># RPN è®¡ç®—å™¨å®ç°</span>
<span class="hljs-keyword">type</span>
  <span class="hljs-type">Stack</span> = <span class="hljs-built_in">seq</span>[<span class="hljs-built_in">float</span>]

<span class="hljs-keyword">proc</span> push(s: <span class="hljs-keyword">var</span> <span class="hljs-type">Stack</span>, value: <span class="hljs-built_in">float</span>) =
  s.add(value)

<span class="hljs-keyword">proc</span> pop(s: <span class="hljs-keyword">var</span> <span class="hljs-type">Stack</span>): <span class="hljs-built_in">float</span> =
  <span class="hljs-keyword">if</span> s.len &gt; <span class="hljs-number">0</span>:
    <span class="hljs-literal">result</span> = s[^<span class="hljs-number">1</span>]
    s.setLen(s.len - <span class="hljs-number">1</span>)
  <span class="hljs-keyword">else</span>:
    <span class="hljs-keyword">raise</span> newException(<span class="hljs-type">ValueError</span>, <span class="hljs-string">&quot;æ ˆä¸ºç©º&quot;</span>)

<span class="hljs-keyword">proc</span> evaluateRPN(expression: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">float</span> =
  <span class="hljs-keyword">var</span> stack: <span class="hljs-type">Stack</span>
  <span class="hljs-keyword">let</span> tokens = expression.split()
  
  <span class="hljs-keyword">for</span> token <span class="hljs-keyword">in</span> tokens:
    <span class="hljs-keyword">case</span> token
    <span class="hljs-keyword">of</span> <span class="hljs-string">&quot;+&quot;</span>:
      <span class="hljs-keyword">let</span> b = stack.pop()
      <span class="hljs-keyword">let</span> a = stack.pop()
      stack.push(a + b)
    <span class="hljs-keyword">of</span> <span class="hljs-string">&quot;-&quot;</span>:
      <span class="hljs-keyword">let</span> b = stack.pop()
      <span class="hljs-keyword">let</span> a = stack.pop()
      stack.push(a - b)
    <span class="hljs-keyword">of</span> <span class="hljs-string">&quot;*&quot;</span>:
      <span class="hljs-keyword">let</span> b = stack.pop()
      <span class="hljs-keyword">let</span> a = stack.pop()
      stack.push(a * b)
    <span class="hljs-keyword">of</span> <span class="hljs-string">&quot;/&quot;</span>:
      <span class="hljs-keyword">let</span> b = stack.pop()
      <span class="hljs-keyword">let</span> a = stack.pop()
      stack.push(a / b)
    <span class="hljs-keyword">else</span>:
      <span class="hljs-comment"># å°è¯•å°† token è§£æä¸ºæ•°å­—</span>
      <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">let</span> number = parseFloat(token)
        stack.push(number)
      <span class="hljs-keyword">except</span> <span class="hljs-type">ValueError</span>:
        <span class="hljs-keyword">raise</span> newException(<span class="hljs-type">ValueError</span>, <span class="hljs-string">&quot;æ— æ•ˆçš„ token: &quot;</span> &amp; token)
  
  <span class="hljs-keyword">if</span> stack.len == <span class="hljs-number">1</span>:
    <span class="hljs-keyword">return</span> stack.pop()
  <span class="hljs-keyword">else</span>:
    <span class="hljs-keyword">raise</span> newException(<span class="hljs-type">ValueError</span>, <span class="hljs-string">&quot;è¡¨è¾¾å¼ä¸å®Œæ•´&quot;</span>)</code></pre>
<h2>ä½¿ç”¨ç¤ºä¾‹</h2>
<p>è®©æˆ‘ä»¬ä½¿ç”¨ä¸Šé¢å®ç°çš„ RPN è®¡ç®—å™¨æ¥è®¡ç®—ä¸€äº›è¡¨è¾¾å¼ï¼š</p>
<pre><code class="nohighlight hljs nim"><span class="hljs-comment"># ç¤ºä¾‹ 1: ç®€å•çš„åŠ æ³•</span>
<span class="hljs-keyword">let</span> expr1 = <span class="hljs-string">&quot;3 4 +&quot;</span>
<span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;è¡¨è¾¾å¼: &quot;</span>, expr1
<span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;ç»“æœ: &quot;</span>, evaluateRPN(expr1)</code></pre><pre class="nb-output">è¡¨è¾¾å¼: 3 4 +
ç»“æœ: 7.0</pre>
<pre><code class="nohighlight hljs nim"><span class="hljs-comment"># ç¤ºä¾‹ 2: å¤æ‚çš„è¡¨è¾¾å¼</span>
<span class="hljs-keyword">let</span> expr2 = <span class="hljs-string">&quot;5 1 2 + 4 * + 3 -&quot;</span>
<span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;è¡¨è¾¾å¼: &quot;</span>, expr2
<span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;ç»“æœ: &quot;</span>, evaluateRPN(expr2)</code></pre><pre class="nb-output">è¡¨è¾¾å¼: 5 1 2 + 4 * + 3 -
ç»“æœ: 14.0</pre>
<h2>RPN è¡¨è¾¾å¼ç¤ºä¾‹</h2>
<table>
<thead>
<tr>
<th>ä¸­ç¼€è¡¨è¾¾å¼</th>
<th>RPN è¡¨è¾¾å¼</th>
<th>ç»“æœ</th>
</tr>
</thead>
<tbody>
<tr>
<td>3 + 4</td>
<td>3 4 +</td>
<td>7</td>
</tr>
<tr>
<td>(5 + (1 + 2) Ã— 4) - 3</td>
<td>5 1 2 + 4 * + 3 -</td>
<td>14</td>
</tr>
<tr>
<td>10 Ã— (2 + 3)</td>
<td>10 2 3 + *</td>
<td>50</td>
</tr></tbody></table>
<h2>ä¼˜åŠ¿</h2>
<ol>
<li><strong>æ— éœ€æ‹¬å·</strong>: RPN ä¸éœ€è¦æ‹¬å·æ¥æŒ‡å®šè¿ç®—é¡ºåº</li>
<li><strong>æ˜“äºå®ç°</strong>: ä½¿ç”¨æ ˆæ•°æ®ç»“æ„å¾ˆå®¹æ˜“å®ç°</li>
<li><strong>è®¡ç®—æ•ˆç‡é«˜</strong>: ä¸€æ¬¡æ‰«æå³å¯å®Œæˆè®¡ç®—</li>
</ol>
<h2>æ³¨æ„äº‹é¡¹</h2>
<ul>
<li>ç¡®ä¿è¡¨è¾¾å¼ä¸­æœ‰è¶³å¤Ÿçš„æ“ä½œæ•°</li>
<li>é™¤æ³•æ“ä½œæ—¶æ³¨æ„é™¤é›¶é”™è¯¯</li>
<li>è¡¨è¾¾å¼ç»“æŸæ—¶æ ˆä¸­åº”è¯¥åªæœ‰ä¸€ä¸ªå€¼</li>
</ul>
</main>
<footer>
<div class="nb-box">
  <span><span class="nb-small">made with <a href="https://pietroppeter.github.io/nimib/">nimib ğŸ³</a></span></span>
  <span></span>
  <span><button class="nb-small" id="show" onclick="toggleSourceDisplay()">Show Source</button></span>
</div>
</footer>
<section id="source">
<pre><code class="nohighlight nim hljs"><span class="hljs-keyword">import</span> nimib
<span class="hljs-keyword">import</span> strutils

nbInit

nbText: <span class="hljs-string">&quot;&quot;&quot;
# RPN è®¡ç®—å™¨æ‰‹å†Œ

RPNï¼ˆé€†æ³¢å…°è¡¨ç¤ºæ³•ï¼‰æ˜¯ä¸€ç§æ•°å­¦è¡¨è¾¾å¼è¡¨ç¤ºæ³•ï¼Œå…¶ä¸­è¿ç®—ç¬¦ä½äºæ“ä½œæ•°ä¹‹åã€‚

## åŸºæœ¬æ“ä½œ

RPN è®¡ç®—å™¨ä½¿ç”¨æ ˆæ¥å­˜å‚¨æ“ä½œæ•°ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›åŸºæœ¬æ“ä½œç¤ºä¾‹ï¼š
&quot;&quot;&quot;</span>

nbCode:
  <span class="hljs-comment"># RPN è®¡ç®—å™¨å®ç°</span>
  <span class="hljs-keyword">type</span>
    <span class="hljs-type">Stack</span> = <span class="hljs-built_in">seq</span>[<span class="hljs-built_in">float</span>]
  
  <span class="hljs-keyword">proc</span> push(s: <span class="hljs-keyword">var</span> <span class="hljs-type">Stack</span>, value: <span class="hljs-built_in">float</span>) =
    s.add(value)
  
  <span class="hljs-keyword">proc</span> pop(s: <span class="hljs-keyword">var</span> <span class="hljs-type">Stack</span>): <span class="hljs-built_in">float</span> =
    <span class="hljs-keyword">if</span> s.len &gt; <span class="hljs-number">0</span>:
      <span class="hljs-literal">result</span> = s[^<span class="hljs-number">1</span>]
      s.setLen(s.len - <span class="hljs-number">1</span>)
    <span class="hljs-keyword">else</span>:
      <span class="hljs-keyword">raise</span> newException(<span class="hljs-type">ValueError</span>, <span class="hljs-string">&quot;æ ˆä¸ºç©º&quot;</span>)

  <span class="hljs-keyword">proc</span> evaluateRPN(expression: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">float</span> =
    <span class="hljs-keyword">var</span> stack: <span class="hljs-type">Stack</span>
    <span class="hljs-keyword">let</span> tokens = expression.split()
    
    <span class="hljs-keyword">for</span> token <span class="hljs-keyword">in</span> tokens:
      <span class="hljs-keyword">case</span> token
      <span class="hljs-keyword">of</span> <span class="hljs-string">&quot;+&quot;</span>:
        <span class="hljs-keyword">let</span> b = stack.pop()
        <span class="hljs-keyword">let</span> a = stack.pop()
        stack.push(a + b)
      <span class="hljs-keyword">of</span> <span class="hljs-string">&quot;-&quot;</span>:
        <span class="hljs-keyword">let</span> b = stack.pop()
        <span class="hljs-keyword">let</span> a = stack.pop()
        stack.push(a - b)
      <span class="hljs-keyword">of</span> <span class="hljs-string">&quot;*&quot;</span>:
        <span class="hljs-keyword">let</span> b = stack.pop()
        <span class="hljs-keyword">let</span> a = stack.pop()
        stack.push(a * b)
      <span class="hljs-keyword">of</span> <span class="hljs-string">&quot;/&quot;</span>:
        <span class="hljs-keyword">let</span> b = stack.pop()
        <span class="hljs-keyword">let</span> a = stack.pop()
        stack.push(a / b)
      <span class="hljs-keyword">else</span>:
        <span class="hljs-comment"># å°è¯•å°† token è§£æä¸ºæ•°å­—</span>
        <span class="hljs-keyword">try</span>:
          <span class="hljs-keyword">let</span> number = parseFloat(token)
          stack.push(number)
        <span class="hljs-keyword">except</span> <span class="hljs-type">ValueError</span>:
          <span class="hljs-keyword">raise</span> newException(<span class="hljs-type">ValueError</span>, <span class="hljs-string">&quot;æ— æ•ˆçš„ token: &quot;</span> &amp; token)
    
    <span class="hljs-keyword">if</span> stack.len == <span class="hljs-number">1</span>:
      <span class="hljs-keyword">return</span> stack.pop()
    <span class="hljs-keyword">else</span>:
      <span class="hljs-keyword">raise</span> newException(<span class="hljs-type">ValueError</span>, <span class="hljs-string">&quot;è¡¨è¾¾å¼ä¸å®Œæ•´&quot;</span>)

nbText: <span class="hljs-string">&quot;&quot;&quot;
## ä½¿ç”¨ç¤ºä¾‹

è®©æˆ‘ä»¬ä½¿ç”¨ä¸Šé¢å®ç°çš„ RPN è®¡ç®—å™¨æ¥è®¡ç®—ä¸€äº›è¡¨è¾¾å¼ï¼š
&quot;&quot;&quot;</span>

nbCode:
  <span class="hljs-comment"># ç¤ºä¾‹ 1: ç®€å•çš„åŠ æ³•</span>
  <span class="hljs-keyword">let</span> expr1 = <span class="hljs-string">&quot;3 4 +&quot;</span>
  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;è¡¨è¾¾å¼: &quot;</span>, expr1
  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;ç»“æœ: &quot;</span>, evaluateRPN(expr1)

nbCode:
  <span class="hljs-comment"># ç¤ºä¾‹ 2: å¤æ‚çš„è¡¨è¾¾å¼</span>
  <span class="hljs-keyword">let</span> expr2 = <span class="hljs-string">&quot;5 1 2 + 4 * + 3 -&quot;</span>
  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;è¡¨è¾¾å¼: &quot;</span>, expr2
  <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;ç»“æœ: &quot;</span>, evaluateRPN(expr2)

nbText: <span class="hljs-string">&quot;&quot;&quot;
## RPN è¡¨è¾¾å¼ç¤ºä¾‹

| ä¸­ç¼€è¡¨è¾¾å¼ | RPN è¡¨è¾¾å¼ | ç»“æœ |
|-----------|------------|------|
| 3 + 4 | 3 4 + | 7 |
| (5 + (1 + 2) Ã— 4) - 3 | 5 1 2 + 4 * + 3 - | 14 |
| 10 Ã— (2 + 3) | 10 2 3 + * | 50 |

## ä¼˜åŠ¿

1. **æ— éœ€æ‹¬å·**: RPN ä¸éœ€è¦æ‹¬å·æ¥æŒ‡å®šè¿ç®—é¡ºåº
2. **æ˜“äºå®ç°**: ä½¿ç”¨æ ˆæ•°æ®ç»“æ„å¾ˆå®¹æ˜“å®ç°
3. **è®¡ç®—æ•ˆç‡é«˜**: ä¸€æ¬¡æ‰«æå³å¯å®Œæˆè®¡ç®—

## æ³¨æ„äº‹é¡¹

- ç¡®ä¿è¡¨è¾¾å¼ä¸­æœ‰è¶³å¤Ÿçš„æ“ä½œæ•°
- é™¤æ³•æ“ä½œæ—¶æ³¨æ„é™¤é›¶é”™è¯¯
- è¡¨è¾¾å¼ç»“æŸæ—¶æ ˆä¸­åº”è¯¥åªæœ‰ä¸€ä¸ªå€¼
&quot;&quot;&quot;</span>

nbSave

</code></pre>
</section><script>
function toggleSourceDisplay() {
  var btn = document.getElementById("show")
  var source = document.getElementById("source");
  if (btn.innerHTML=="Show Source") {
    btn.innerHTML = "Hide Source";
    source.style.display = "block";
  } else {
    btn.innerHTML = "Show Source";
    source.style.display = "none";
  }
}
</script></body>
</html>